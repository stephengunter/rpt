import{m as xa,A as Y,u as Le,r as De,d as ce,o as Ye,n as Ct,s as Qe,c as h,e as q,f as we,g as n,w as I,V as Ne,j as J,t as Z,F as ne,p as Sa,q as le,v as re,l as fe,x as Dt,y as Q,z as Va,B as ge,C as ve,D as Tt,G as pe,H as ut,I as j,J as $t,K as ee,L as Pa,M as Ia,N as Ca,O as Ie,P as Et,Q as Da,R as Ta,T as Ft,W as Xe,X as Bt,Y as oe,Z as $a,_ as _e,$ as Ea,a0 as Fa,a1 as Ba,a2 as Ve,a3 as Ra,a4 as he,a5 as Ge,h as te,i as me,a6 as Fe,a7 as Pe,a8 as ke,k as M,a9 as Oa,aa as Na,E as it,ab as Aa,ac as Se,ad as La,ae as Ma,af as ja,ag as Ua,ah as Ga,ai as za,aj as Ha,ak as Ka,al as Wa,am as Me,an as Ja,ao as qa,ap as Ze,aq as He,ar as Ya,as as je,at as W,au as wt,av as Re,aw as Rt,ax as xe,ay as Te,az as Ot,aA as Qa,aB as Xa,aC as Za,aD as Oe,aE as Nt,aF as Ue,aG as dt,aH as el,aI as tl,aJ as At,aK as at,aL as Be,aM as al,aN as Lt,aO as ct,aP as ll,aQ as nl,a as Mt,b as jt,aR as ol,aS as rl,aT as sl,aU as ul,aV as il,aW as be,aX as dl,aY as cl,aZ as fl,a_ as ml,a$ as vl,b0 as lt,b1 as gl,b2 as kt,b3 as yl,b4 as pl,b5 as bl,b6 as nt,b7 as hl,b8 as xt,b9 as St,ba as _l,bb as wl}from"./index-c3e40adb.js";import{V as ze}from"./validate.types-512aac96.js";import{J as se,m as kl,V as Ae,a as xl,b as Vt,c as ie,_ as Sl,d as Vl}from"./VSelect-1b8c99bf.js";import{V as de,a as G}from"./VRow-39a21267.js";import{V as ye,m as ft,u as mt,a as Ce,b as Pl,f as Il,c as Cl,d as Dl}from"./VTextField-e1b68920.js";import{u as Ut,c as ue,r as ot,_ as Tl}from"./index-7942b0ec.js";import{_ as $l}from"./Date-e8692911.js";import{b as El,g as Fl,d as Bl}from"./files-2d334451.js";import"./VAlert-839ebed3.js";function Pt(e,l,a){return Object.keys(e).filter(t=>xa(t)&&t.endsWith(l)).reduce((t,r)=>(t[r.slice(0,-l.length)]=o=>e[r](o,a(o)),t),{})}const Rl=[{value:1,title:"已審核"},{value:0,title:"未審核"}],Ol=J("th",{class:"text-center",style:{width:"10%"}},null,-1),Nl=J("th",{class:"text-center",style:{width:"15%"}},null,-1),Al={class:"text-center",style:{width:"10%"}},Ll={class:"text-center text-indigo-lighten-1",style:{width:"25%"}},Ml=J("th",{class:"text-center text-indigo-lighten-1"}," 備註 ",-1),jl={class:"font-weight-bold"},Ul={class:"font-weight-bold"},Gl={class:"font-weight-bold text-center"},zl={__name:"Review",props:{list:{type:Array,default:()=>[]},court_types:{type:Array,default:()=>[]},origin_types:{type:Array,default:()=>[]}},emits:[Y.SUBMIT.name],setup(e,{emit:l}){const a=e,t=l,r=Le(),i=De(ce({models:[]}));Ye(d);function d(){a.list.forEach(f=>{let v={id:0,typeId:0,judgeDate:0,fileNumber:"",originType:"",courtType:"",year:"",category:"",num:"",ps:"",fileName:"",errors:new Ct};Qe(f,v),u(v),i.models.push(v)})}const c=h(()=>r.state.files_judgebooks.labels);h(()=>r.state.files_judgebooks.upload.results);const m=h(()=>r.state.files_judgebooks.types);h(()=>m.value.map(f=>({value:f.id,title:f.title})));const _=h(()=>i.models.length?i.models.map(f=>f.errors.any()).some(f=>f===!0):!1);function x(f){const v=m.value.find(A=>A.id===f.typeId),D=a.origin_types.find(A=>A.value===f.originType);return`${v.title} (${D.title})`}function y(f){return`${a.court_types.find(D=>D.value===f.courtType).title} ${f.year}年 ${f.category} ${f.num}`}function s(f){return Dt(f.judgeDate,!0)}function u(f){p(f)}function p(f){const v="fileNumber";let D=!1;if(f[v]?D=se.checkFileNumber(f[v]):D=!1,D)f.errors.clear(v);else{let A=f[v]?`${c.value[v]}不正確`:ze.REQUIRED(c.value[v]);f.errors.set(v,[A])}}function g(){t(Y.SUBMIT.name,i.models)}return(f,v)=>(q(),we("div",null,[n(de,{dense:""},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[n(Ne,null,{default:I(()=>[J("thead",null,[J("tr",null,[Ol,Nl,J("th",Al,Z(c.value.judgeDate),1),J("th",Ll,Z(c.value.fileNumber),1),Ml])]),J("tbody",null,[(q(!0),we(ne,null,Sa(i.models,D=>(q(),we("tr",{key:D.id},[J("td",jl,Z(x(D)),1),J("td",Ul,Z(y(D)),1),J("td",Gl,Z(s(D)),1),J("td",null,[n(ye,{variant:"outlined",class:"pt-3",density:"compact",modelValue:D.fileNumber,"onUpdate:modelValue":A=>D.fileNumber=A,"error-messages":D.errors.get("fileNumber"),onInput:A=>p(D)},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput"])]),J("td",null,[n(ye,{variant:"outlined",class:"pt-3",density:"compact",modelValue:D.ps,"onUpdate:modelValue":A=>D.ps=A},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1})]),_:1})]),_:1}),n(de,{dense:""},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[n(le,{color:"success",class:"float-right",disabled:i.models.length===0||_.value,onClick:re(g,["prevent"])},{default:I(()=>[fe(" 審核通過 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]))}};const Hl=Q({...ft(),...Va(kl(),["inline"])},"VCheckbox"),It=ge()({name:"VCheckbox",inheritAttrs:!1,props:Hl(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const r=ve(e,"modelValue"),{isFocused:o,focus:i,blur:d}=mt(e),c=Tt(),m=h(()=>e.id||`checkbox-${c}`);return pe(()=>{const[_,x]=ut(a),y=Ce.filterProps(e),s=Ae.filterProps(e);return n(Ce,j({class:["v-checkbox",e.class]},_,y,{modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,id:m.value,focused:o.value,style:e.style}),{...t,default:u=>{let{id:p,messagesId:g,isDisabled:f,isReadonly:v,isValid:D}=u;return n(Ae,j(s,{id:p.value,"aria-describedby":g.value,disabled:f.value,readonly:v.value},x,{error:D.value===!1,modelValue:r.value,"onUpdate:modelValue":A=>r.value=A,onFocus:i,onBlur:d}),t)}})}),{}}});const Kl=Q({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ft(),...xl()},"VSwitch"),Wl=ge()({name:"VSwitch",inheritAttrs:!1,props:Kl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const r=ve(e,"indeterminate"),o=ve(e,"modelValue"),{loaderClasses:i}=$t(e),{isFocused:d,focus:c,blur:m}=mt(e),_=ee(),x=Pa&&window.matchMedia("(forced-colors: active)").matches,y=h(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),s=Tt(),u=h(()=>e.id||`switch-${s}`);function p(){r.value&&(r.value=!1)}function g(f){var v,D;f.stopPropagation(),f.preventDefault(),(D=(v=_.value)==null?void 0:v.input)==null||D.click()}return pe(()=>{const[f,v]=ut(a),D=Ce.filterProps(e),A=Vt.filterProps(e);return n(Ce,j({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},i.value,e.class]},f,D,{modelValue:o.value,"onUpdate:modelValue":k=>o.value=k,id:u.value,focused:d.value,style:e.style}),{...t,default:k=>{let{id:L,messagesId:z,isDisabled:S,isReadonly:b,isValid:w}=k;const V={model:o,isValid:w};return n(Vt,j({ref:_},A,{modelValue:o.value,"onUpdate:modelValue":[F=>o.value=F,p],id:L.value,"aria-describedby":z.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:S.value,readonly:b.value,onFocus:c,onBlur:m},v),{...t,default:F=>{let{backgroundColorClasses:R,backgroundColorStyles:P}=F;return n("div",{class:["v-switch__track",x?void 0:R.value],style:P.value,onClick:g},[t["track-true"]&&n("div",{key:"prepend",class:"v-switch__track-true"},[t["track-true"](V)]),t["track-false"]&&n("div",{key:"append",class:"v-switch__track-false"},[t["track-false"](V)])])},input:F=>{let{inputNode:R,icon:P,backgroundColorClasses:T,backgroundColorStyles:U}=F;return n(ne,null,[R,n("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":P||e.loading},e.inset||x?void 0:T.value],style:e.inset?void 0:U.value},[t.thumb?n(Ia,{defaults:{VIcon:{icon:P,size:"x-small"}}},{default:()=>[t.thumb({...V,icon:P})]}):n(Ca,null,{default:()=>[e.loading?n(Et,{name:"v-switch",active:!0,color:w.value===!1?void 0:y.value},{default:H=>t.loader?t.loader(H):n(Da,{active:H.isActive,color:H.color,indeterminate:!0,size:"16",width:"2"},null)}):P&&n(Ie,{key:String(P),icon:P,size:"x-small"},null)]})])])}})}})}),{}}});const Jl=Q({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...ft(),...Pl()},"VTextarea"),ql=ge()({name:"VTextarea",directives:{Intersect:Ta},inheritAttrs:!1,props:Jl(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,l){let{attrs:a,emit:t,slots:r}=l;const o=ve(e,"modelValue"),{isFocused:i,focus:d,blur:c}=mt(e),m=h(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),_=h(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function x(V,F){var R,P;!e.autofocus||!V||(P=(R=F[0].target)==null?void 0:R.focus)==null||P.call(R)}const y=ee(),s=ee(),u=Ft(""),p=ee(),g=h(()=>e.persistentPlaceholder||i.value||e.active);function f(){var V;p.value!==document.activeElement&&((V=p.value)==null||V.focus()),i.value||d()}function v(V){f(),t("click:control",V)}function D(V){t("mousedown:control",V)}function A(V){V.stopPropagation(),f(),Ve(()=>{o.value="",Ra(e["onClick:clear"],V)})}function k(V){var R;const F=V.target;if(o.value=F.value,(R=e.modelModifiers)!=null&&R.trim){const P=[F.selectionStart,F.selectionEnd];Ve(()=>{F.selectionStart=P[0],F.selectionEnd=P[1]})}}const L=ee(),z=ee(+e.rows),S=h(()=>["plain","underlined"].includes(e.variant));Xe(()=>{e.autoGrow||(z.value=+e.rows)});function b(){e.autoGrow&&Ve(()=>{if(!L.value||!s.value)return;const V=getComputedStyle(L.value),F=getComputedStyle(s.value.$el),R=parseFloat(V.getPropertyValue("--v-field-padding-top"))+parseFloat(V.getPropertyValue("--v-input-padding-top"))+parseFloat(V.getPropertyValue("--v-field-padding-bottom")),P=L.value.scrollHeight,T=parseFloat(V.lineHeight),U=Math.max(parseFloat(e.rows)*T+R,parseFloat(F.getPropertyValue("--v-input-control-height"))),H=parseFloat(e.maxRows)*T+R||1/0,K=Ge(P??0,U,H);z.value=Math.floor((K-R)/T),u.value=he(K)})}Bt(b),oe(o,b),oe(()=>e.rows,b),oe(()=>e.maxRows,b),oe(()=>e.density,b);let w;return oe(L,V=>{V?(w=new ResizeObserver(b),w.observe(L.value)):w==null||w.disconnect()}),$a(()=>{w==null||w.disconnect()}),pe(()=>{const V=!!(r.counter||e.counter||e.counterValue),F=!!(V||r.details),[R,P]=ut(a),{modelValue:T,...U}=Ce.filterProps(e),H=Il(e);return n(Ce,j({ref:y,modelValue:o.value,"onUpdate:modelValue":K=>o.value=K,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":S.value},e.class],style:e.style},R,U,{centerAffix:z.value===1&&!S.value,focused:i.value}),{...r,default:K=>{let{id:$,isDisabled:E,isDirty:C,isReadonly:O,isValid:B}=K;return n(Cl,j({ref:s,style:{"--v-textarea-control-height":u.value},onClick:v,onMousedown:D,"onClick:clear":A,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},H,{id:$.value,active:g.value||C.value,centerAffix:z.value===1&&!S.value,dirty:C.value||e.dirty,disabled:E.value,focused:i.value,error:B.value===!1}),{...r,default:N=>{let{props:{class:X,...ae}}=N;return n(ne,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),_e(n("textarea",j({ref:p,class:X,value:o.value,onInput:k,autofocus:e.autofocus,readonly:O.value,disabled:E.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:f,onBlur:c},ae,P),null),[[Ea("intersect"),{handler:x},null,{once:!0}]]),e.autoGrow&&_e(n("textarea",{class:[X,"v-textarea__sizer"],id:`${ae.id}-sizer`,"onUpdate:modelValue":$e=>o.value=$e,ref:L,readonly:!0,"aria-hidden":"true"},null),[[Fa,o.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:F?K=>{var $;return n(ne,null,[($=r.details)==null?void 0:$.call(r,K),V&&n(ne,null,[n("span",null,null),n(Dl,{active:e.persistentCounter||i.value,value:m.value,max:_.value,disabled:e.disabled},r.counter)])])}:void 0})}),Ba({},y,s,p)}}),Yl={class:"mb-3"},Ql=J("span",null,"檔案文件：",-1),Xl=J("span",null,"檔案文件：",-1),Zl={__name:"Form",props:{model:{type:Object,default:null},actions:{type:Array,default:()=>[]},court_types:{type:Array,default:()=>[]},origin_types:{type:Array,default:()=>[]}},emits:[Y.SUBMIT.name,Y.CANCEL.name,Y.REMOVE.name],setup(e,{emit:l}){const a=e,t=l,r=Le();it.JUDGEBOOKFILE;const o={form:{id:0,typeId:0,departmentId:null,judgeDate:0,fileNumber:"",courtType:"",year:"",category:"",num:"",ps:"",fileName:"",reviewed:!1},date:{date:null,value:"",model:{text:"",text_cn:"",num:0},error_message:""},options:{department:[]},file:null},i=ee(null),d=h(()=>s.file===null),c=h(()=>r.state.files_judgebooks.types.map($=>({value:$.id,title:$.title}))),m=h(()=>r.state.files_judgebooks.ad_dpts),_=h(()=>r.state.files_judgebooks.departments),x=h(()=>r.state.files_judgebooks.allowEmptyJudgeDate),y=h(()=>r.state.files_judgebooks.allowEmptyFileNumber),s=De(ce(o)),u=h(()=>({fileNumber:{isValid:ue.withMessage(`${p.value.fileNumber}不正確`,w)},year:{required:ue.withMessage(ze.REQUIRED(p.value.year),ot),isValid:ue.withMessage(`${p.value.year}不正確`,V)},category:{required:ue.withMessage(ze.REQUIRED(p.value.category),ot),isValid:ue.withMessage(`${p.value.category}不正確`,F)},num:{required:ue.withMessage(ze.REQUIRED(p.value.num),ot),isValid:ue.withMessage(`${p.value.num}不正確`,R)}})),p=h(()=>r.state.files_judgebooks.labels),g=Ut(u,s.form),f=h(()=>s.form.reviewed?"已審核":"未審核通過"),v=h(()=>!(!a.model.id||a.model.reviewed));Ye(D);function D(){Qe(a.model,s.form),A(s.form.courtType),s.date=ce(se.iniJudgeDateModel(a.model.judgeDate))}function A($){let E=k($);s.options.department=E;let C=s.form.departmentId;C&&E.findIndex(B=>B.value===C)<0&&(s.form.departmentId=null)}function k($){return $=$?$.toLowerCase():"",_.value.hasOwnProperty($)?_.value[$].options:[]}function L(){g.value.$validate().then($=>{if($){if(!P(s.form.judgeDate)){s.date.error_message=`${p.value.judgeDate}不正確`;return}s.form.num=se.checkNum(s.form.num),t(Y.SUBMIT.name,{form:s.form,file:s.file})}})}function z(){Oa({type:"warning",title:"確定要刪除嗎?",text:"",on_ok:S,cancel:"取消"})}function S(){Na(),t(Y.REMOVE.name)}function b($){r.commit(Fe)}function w($){return $?se.checkFileNumber($):s.form.reviewed?!1:y.value}function V($){return $?se.checkYear($):!1}function F($){return!!$}function R($){return $?se.isValidNum($):!1}function P($){return $?se.checkJudgeDate($):x.value}function T($){const E=a.actions;return E.length?E.findIndex(C=>C.toLowerCase()===$.toLowerCase())>-1:!1}function U(){i.value.launch()}function H($){if($.length){const E=$[0];(E.type==="application/pdf"||E.name.toLowerCase().endsWith(".pdf"))&&(s.file=E)}else s.file=null}function K({date:$,model:E},C=!0){$?(s.date.date=$,s.date.model=ce(E),s.date.value=E.text_cn,s.form.judgeDate=E.num):(s.date=ce(se.iniJudgeDateModel()),s.form.judgeDate=0),P(s.form.judgeDate)?s.date.error_message="":s.date.error_message=`${p.value.judgeDate}不正確`}return($,E)=>{const C=Sl,O=$l,B=Tl;return q(),we("form",{onSubmit:re(L,["prevent"]),onInput:b},[s.form.fileName?(q(),te(de,{key:0,dense:""},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[J("div",Yl,[_e(J("div",null,[Ql,n(Ie,{size:"small",icon:"mdi-file"}),fe(" "+Z(s.form.fileName)+" ",1),n(ke,{text:"刪除重傳"},{activator:I(({props:N})=>[n(Ie,j({size:"small"},N,{color:"red-lighten-1",icon:"mdi-close",onClick:re(U,["prevent"])}),null,16)]),_:1})],512),[[Pe,d.value&&s.form.fileName]]),_e(J("div",null,[Xl,n(C,{ref_key:"file_upload",ref:i,show_button:!1,multiple:!1,is_media:!1,allow_types:[".pdf"],onFileAdded:H,onFileRemoved:H},null,512)],512),[[Pe,!d.value]])])]),_:1})]),_:1})):me("",!0),n(de,{dense:""},{default:I(()=>[n(G,{cols:"3"},{default:I(()=>[n(ie,{label:p.value.typeId,density:"compact",variant:"outlined",items:c.value,modelValue:s.form.typeId,"onUpdate:modelValue":E[0]||(E[0]=N=>s.form.typeId=N)},null,8,["label","items","modelValue"])]),_:1}),n(G,{cols:"3"},{default:I(()=>[n(ie,{label:p.value.courtType,density:"compact",variant:"outlined",items:e.court_types,modelValue:s.form.courtType,"onUpdate:modelValue":[E[1]||(E[1]=N=>s.form.courtType=N),A]},null,8,["label","items","modelValue"])]),_:1}),n(G,{cols:"3"},{default:I(()=>[n(ie,{label:p.value.dpt,density:"compact",variant:"outlined",clearable:m.value.length===0,items:s.options.department,modelValue:s.form.departmentId,"onUpdate:modelValue":E[2]||(E[2]=N=>s.form.departmentId=N)},null,8,["label","clearable","items","modelValue"])]),_:1}),n(G,{cols:"3"},{default:I(()=>[n(O,{label:p.value.judgeDate,clearable:x.value,error_message:s.date.error_message,date:s.date.date,value:s.date.value,onReady:E[3]||(E[3]=N=>K(N,!1)),onSelected:E[4]||(E[4]=N=>K(N,!0))},null,8,["label","clearable","error_message","date","value"])]),_:1})]),_:1}),n(de,{dense:""},{default:I(()=>[n(G,{cols:"4"},{default:I(()=>[n(ye,{label:p.value.year,density:"compact",modelValue:s.form.year,"onUpdate:modelValue":E[5]||(E[5]=N=>s.form.year=N),"error-messages":M(g).year.$errors.map(N=>N.$message),onInput:M(g).year.$touch,onBlur:M(g).year.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1}),n(G,{cols:"4"},{default:I(()=>[n(ye,{label:p.value.category,density:"compact",modelValue:s.form.category,"onUpdate:modelValue":E[6]||(E[6]=N=>s.form.category=N),"error-messages":M(g).category.$errors.map(N=>N.$message),onInput:M(g).category.$touch,onBlur:M(g).category.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1}),n(G,{cols:"4"},{default:I(()=>[n(ye,{label:p.value.num,density:"compact",modelValue:s.form.num,"onUpdate:modelValue":E[7]||(E[7]=N=>s.form.num=N),"error-messages":M(g).num.$errors.map(N=>N.$message),onInput:M(g).num.$touch,onBlur:M(g).num.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1})]),_:1}),n(de,{dense:""},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[n(ye,{label:p.value.fileNumber,density:"compact",modelValue:s.form.fileNumber,"onUpdate:modelValue":E[8]||(E[8]=N=>s.form.fileNumber=N),"error-messages":M(g).fileNumber.$errors.map(N=>N.$message),onInput:M(g).fileNumber.$touch,onBlur:M(g).fileNumber.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1}),n(G,{cols:"12"},{default:I(()=>[n(ql,{"auto-grow":"",label:p.value.ps,modelValue:s.form.ps,"onUpdate:modelValue":E[9]||(E[9]=N=>s.form.ps=N)},null,8,["label","modelValue"])]),_:1}),T(M(Y).REVIEW.name)?(q(),te(G,{key:0,cols:"12"},{default:I(()=>[n(Wl,{label:f.value,"hide-details":"",inset:"",color:"success",modelValue:s.form.reviewed,"onUpdate:modelValue":[E[10]||(E[10]=N=>s.form.reviewed=N),E[11]||(E[11]=()=>{M(g).fileNumber.$touch})]},null,8,["label","modelValue"])]),_:1})):me("",!0)]),_:1}),n(de,{dense:""},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[n(B)]),_:1}),n(G,{cols:"12"},{default:I(()=>[v.value?(q(),te(le,{key:0,class:"float-left",color:"error",onClick:re(z,["prevent"])},{default:I(()=>[fe(Z(M(Y).REMOVE.title),1)]),_:1})):me("",!0),n(le,{type:"submit",color:"success",class:"float-right"},{default:I(()=>[fe(Z(M(Y).SAVE.title),1)]),_:1})]),_:1})]),_:1})],32)}}};function en(){const e=ee([]);Aa(()=>e.value=[]);function l(a,t){e.value[t]=a}return{refs:e,updateRef:l}}const tn=Q({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Se,default:"$first"},prevIcon:{type:Se,default:"$prev"},nextIcon:{type:Se,default:"$next"},lastIcon:{type:Se,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...La(),...Ma(),...ja(),...Ua(),...Ga(),...za(),...Ha({tag:"nav"}),...Ka(),...Wa({variant:"text"})},"VPagination"),rt=ge()({name:"VPagination",props:tn(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,l){let{slots:a,emit:t}=l;const r=ve(e,"modelValue"),{t:o,n:i}=Me(),{isRtl:d}=Ja(),{themeClasses:c}=qa(e),{width:m}=Ze(),_=Ft(-1);He(void 0,{scoped:!0});const{resizeRef:x}=Ya(S=>{if(!S.length)return;const{target:b,contentRect:w}=S[0],V=b.querySelector(".v-pagination__list > *");if(!V)return;const F=w.width,R=V.offsetWidth+parseFloat(getComputedStyle(V).marginRight)*2;_.value=p(F,R)}),y=h(()=>parseInt(e.length,10)),s=h(()=>parseInt(e.start,10)),u=h(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):_.value>=0?_.value:p(m.value,58));function p(S,b){const w=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((S-b*w)/b).toFixed(2)))}const g=h(()=>{if(y.value<=0||isNaN(y.value)||y.value>Number.MAX_SAFE_INTEGER)return[];if(u.value<=0)return[];if(u.value===1)return[r.value];if(y.value<=u.value)return je(y.value,s.value);const S=u.value%2===0,b=S?u.value/2:Math.floor(u.value/2),w=S?b:b+1,V=y.value-b;if(w-r.value>=0)return[...je(Math.max(1,u.value-1),s.value),e.ellipsis,y.value];if(r.value-V>=(S?1:0)){const F=u.value-1,R=y.value-F+s.value;return[s.value,e.ellipsis,...je(F,R)]}else{const F=Math.max(1,u.value-3),R=F===1?r.value:r.value-Math.ceil(F/2)+s.value;return[s.value,e.ellipsis,...je(F,R),e.ellipsis,y.value]}});function f(S,b,w){S.preventDefault(),r.value=b,w&&t(w,b)}const{refs:v,updateRef:D}=en();He({VPaginationBtn:{color:W(e,"color"),border:W(e,"border"),density:W(e,"density"),size:W(e,"size"),variant:W(e,"variant"),rounded:W(e,"rounded"),elevation:W(e,"elevation")}});const A=h(()=>g.value.map((S,b)=>{const w=V=>D(V,b);if(typeof S=="string")return{isActive:!1,key:`ellipsis-${b}`,page:S,props:{ref:w,ellipsis:!0,icon:!0,disabled:!0}};{const V=S===r.value;return{isActive:V,key:S,page:i(S),props:{ref:w,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:V?e.activeColor:e.color,"aria-current":V,"aria-label":o(V?e.currentPageAriaLabel:e.pageAriaLabel,S),onClick:F=>f(F,S)}}}})),k=h(()=>{const S=!!e.disabled||r.value<=s.value,b=!!e.disabled||r.value>=s.value+y.value-1;return{first:e.showFirstLastPage?{icon:d.value?e.lastIcon:e.firstIcon,onClick:w=>f(w,s.value,"first"),disabled:S,"aria-label":o(e.firstAriaLabel),"aria-disabled":S}:void 0,prev:{icon:d.value?e.nextIcon:e.prevIcon,onClick:w=>f(w,r.value-1,"prev"),disabled:S,"aria-label":o(e.previousAriaLabel),"aria-disabled":S},next:{icon:d.value?e.prevIcon:e.nextIcon,onClick:w=>f(w,r.value+1,"next"),disabled:b,"aria-label":o(e.nextAriaLabel),"aria-disabled":b},last:e.showFirstLastPage?{icon:d.value?e.firstIcon:e.lastIcon,onClick:w=>f(w,s.value+y.value-1,"last"),disabled:b,"aria-label":o(e.lastAriaLabel),"aria-disabled":b}:void 0}});function L(){var b;const S=r.value-s.value;(b=v.value[S])==null||b.$el.focus()}function z(S){S.key===wt.left&&!e.disabled&&r.value>+e.start?(r.value=r.value-1,Ve(L)):S.key===wt.right&&!e.disabled&&r.value<s.value+y.value-1&&(r.value=r.value+1,Ve(L))}return pe(()=>n(e.tag,{ref:x,class:["v-pagination",c.value,e.class],style:e.style,role:"navigation","aria-label":o(e.ariaLabel),onKeydown:z,"data-test":"v-pagination-root"},{default:()=>[n("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&n("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(k.value.first):n(le,j({_as:"VPaginationBtn"},k.value.first),null)]),n("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(k.value.prev):n(le,j({_as:"VPaginationBtn"},k.value.prev),null)]),A.value.map((S,b)=>n("li",{key:S.key,class:["v-pagination__item",{"v-pagination__item--is-active":S.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(S):n(le,j({_as:"VPaginationBtn"},S.props),{default:()=>[S.page]})])),n("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(k.value.next):n(le,j({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&n("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(k.value.last):n(le,j({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}}),an=["textContent"],ln=["textContent"],nn={__name:"Pager",props:{model:{type:Object,default:null},list_key:{type:String,default:"viewList"},can_page:{type:Boolean,default:!0},row_options:{type:Array,default:()=>[10,25,50]}},emits:["page_changed","size_changed"],setup(e,{emit:l}){const a=e,t=l,o=De(ce({page:1,size:10}));oe(()=>a.model,(s,u)=>{_()},{deep:!0}),Ye(_);const i=h(()=>a.model?a.model.totalItems<1:!0),d=h(()=>i.value?0:a.model.pageSize*(a.model.pageNumber-1)+1),c=h(()=>i.value?0:d.value+a.model[a.list_key].length-1),m=h(()=>`${d.value} - ${c.value} , Total ${a.model.totalItems}`);function _(){o.page=a.model.pageNumber,o.size=a.model.pageSize}function x(s){t("page_changed",s)}function y(s){t("size_changed",s)}return(s,u)=>e.can_page?(q(),te(de,{key:0,dense:""},{default:I(()=>[n(G,{cols:"2"},{default:I(()=>[n(ie,{class:"float-right mt-1",style:{width:"100px"},density:"compact",label:"Rows",items:e.row_options,modelValue:o.size,"onUpdate:modelValue":[u[0]||(u[0]=p=>o.size=p),y]},null,8,["items","modelValue"])]),_:1}),n(G,{cols:"2"},{default:I(()=>[J("p",{textContent:Z(m.value),class:"mt-1 text-center text-h6"},null,8,an)]),_:1}),n(G,{cols:"8"},{default:I(()=>[n(rt,{class:"float-left",density:"comfortable",modelValue:o.page,"onUpdate:modelValue":[u[1]||(u[1]=p=>o.page=p),x],"total-visible":"7",length:e.model.totalPages},null,8,["modelValue","length"])]),_:1})]),_:1})):(q(),te(de,{key:1},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[J("p",{textContent:Z(m.value),class:"mt-4 text-center"},null,8,ln)]),_:1})]),_:1}))}},on={__name:"Button",props:{text:{type:String,default:""},tooltip:{type:String,default:""},title:{type:String,default:"編修紀錄"},type:{type:Object,default:null},id:{type:String,default:""},action:{type:String,default:""},width:{type:Number,default:()=>Re.L}},setup(e){const l=e;function a(){Rt({type:l.type.name,id:l.id,action:l.action,title:l.title,width:l.width})}return(t,r)=>(q(),te(ke,{text:e.tooltip},{activator:I(({props:o})=>[J("a",j({href:"#"},o,{onClick:re(a,["prevent"])}),Z(e.text),17)]),_:1},8,["text"]))}};const Gt=Q({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),zt=Symbol.for("vuetify:data-table-pagination");function Ht(e){const l=ve(e,"page",void 0,t=>+(t??1)),a=ve(e,"itemsPerPage",void 0,t=>+(t??10));return{page:l,itemsPerPage:a}}function Kt(e){const{page:l,itemsPerPage:a,itemsLength:t}=e,r=h(()=>a.value===-1?0:a.value*(l.value-1)),o=h(()=>a.value===-1?t.value:Math.min(t.value,r.value+a.value)),i=h(()=>a.value===-1||t.value===0?1:Math.ceil(t.value/a.value));Xe(()=>{l.value>i.value&&(l.value=i.value)});function d(y){a.value=y,l.value=1}function c(){l.value=Ge(l.value+1,1,i.value)}function m(){l.value=Ge(l.value-1,1,i.value)}function _(y){l.value=Ge(y,1,i.value)}const x={page:l,itemsPerPage:a,startIndex:r,stopIndex:o,pageCount:i,itemsLength:t,nextPage:c,prevPage:m,setPage:_,setItemsPerPage:d};return xe(zt,x),x}function rn(){const e=Te(zt);if(!e)throw new Error("Missing pagination!");return e}function sn(e){const l=Ot("usePaginatedItems"),{items:a,startIndex:t,stopIndex:r,itemsPerPage:o}=e,i=h(()=>o.value<=0?a.value:a.value.slice(t.value,r.value));return oe(i,d=>{l.emit("update:currentItems",d)}),{paginatedItems:i}}const vt=Q({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ke=ge()({name:"VDataTableFooter",props:vt(),setup(e,l){let{slots:a}=l;const{t}=Me(),{page:r,pageCount:o,startIndex:i,stopIndex:d,itemsLength:c,itemsPerPage:m,setItemsPerPage:_}=rn(),x=h(()=>e.itemsPerPageOptions.map(y=>typeof y=="number"?{value:y,title:y===-1?t("$vuetify.dataFooter.itemsPerPageAll"):String(y)}:{...y,title:isNaN(Number(y.title))?t(y.title):y.title}));return pe(()=>{var s;const y=rt.filterProps(e);return n("div",{class:"v-data-table-footer"},[(s=a.prepend)==null?void 0:s.call(a),n("div",{class:"v-data-table-footer__items-per-page"},[n("span",null,[t(e.itemsPerPageText)]),n(ie,{items:x.value,modelValue:m.value,"onUpdate:modelValue":u=>_(Number(u)),density:"compact",variant:"outlined","hide-details":!0},null)]),n("div",{class:"v-data-table-footer__info"},[n("div",null,[t(e.pageText,c.value?i.value+1:0,d.value,c.value)])]),n("div",{class:"v-data-table-footer__pagination"},[n(rt,j({modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:o.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},y),null)])])}),{}}}),We=Qa({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,l)=>{let{slots:a}=l;const t=e.tag??"td";return n(t,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:he(e.height),width:he(e.width),maxWidth:he(e.maxWidth),left:he(e.fixedOffset||null)}},{default:()=>{var r;return[(r=a.default)==null?void 0:r.call(a)]}})}),un=Q({headers:Array},"DataTable-header"),Wt=Symbol.for("vuetify:data-table-headers"),Jt={title:"",sortable:!1},dn={...Jt,width:48};function cn(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,t)=>{let r=!1;for(let o=0;o<l.length;o++)if(l[o].priority>t){l.splice(o,0,{element:a,priority:t}),r=!0;break}r||l.push({element:a,priority:t})},size:()=>l.length,count:()=>{let a=0;if(!l.length)return 0;const t=Math.floor(l[0].priority);for(let r=0;r<l.length;r++)Math.floor(l[r].priority)===t&&(a+=1);return a},dequeue:()=>l.shift()}}function st(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)l.push(e);else for(const a of e.children)st(a,l);return l}function qt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&l.add(a.key),a.children&&qt(a.children,l);return l}function fn(e){if(e.key){if(e.key==="data-table-group")return Jt;if(["data-table-expand","data-table-select"].includes(e.key))return dn}}function gt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(l,...e.children.map(a=>gt(a,l+1))):l}function mn(e){let l=!1;function a(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o)if(i&&(o.fixed=!0),o.fixed)if(o.children)for(let d=o.children.length-1;d>=0;d--)a(o.children[d],!0);else l?isNaN(+o.width)&&Za(`Multiple fixed columns should have a static width (key: ${o.key})`):o.lastFixed=!0,l=!0;else if(o.children)for(let d=o.children.length-1;d>=0;d--)a(o.children[d]);else l=!1}for(let o=e.length-1;o>=0;o--)a(e[o]);function t(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!o)return i;if(o.children){o.fixedOffset=i;for(const d of o.children)i=t(d,i)}else o.fixed&&(o.fixedOffset=i,i+=parseFloat(o.width||"0")||0);return i}let r=0;for(const o of e)r=t(o,r)}function vn(e,l){const a=[];let t=0;const r=cn(e);for(;r.size()>0;){let i=r.count();const d=[];let c=1;for(;i>0;){const{element:m,priority:_}=r.dequeue(),x=l-t-gt(m);if(d.push({...m,rowspan:x??1,colspan:m.children?st(m).length:1}),m.children)for(const y of m.children){const s=_%1+c/Math.pow(10,t+2);r.enqueue(y,t+x+s)}c+=1,i-=1}t+=1,a.push(d)}return{columns:e.map(i=>st(i)).flat(),headers:a}}function Yt(e){const l=[];for(const a of e){const t={...fn(a),...a},r=t.key??(typeof t.value=="string"?t.value:null),o=t.value??r??null,i={...t,key:r,value:o,sortable:t.sortable??(t.key!=null||!!t.sort),children:t.children?Yt(t.children):void 0};l.push(i)}return l}function Qt(e,l){const a=ee([]),t=ee([]),r=ee({}),o=ee({}),i=ee({});Xe(()=>{var p,g,f;const m=(e.headers||Object.keys(e.items[0]??{}).map(v=>({key:v,title:Xa(v)}))).slice(),_=qt(m);(p=l==null?void 0:l.groupBy)!=null&&p.value.length&&!_.has("data-table-group")&&m.unshift({key:"data-table-group",title:"Group"}),(g=l==null?void 0:l.showSelect)!=null&&g.value&&!_.has("data-table-select")&&m.unshift({key:"data-table-select"}),(f=l==null?void 0:l.showExpand)!=null&&f.value&&!_.has("data-table-expand")&&m.push({key:"data-table-expand"});const x=Yt(m);mn(x);const y=Math.max(...x.map(v=>gt(v)))+1,s=vn(x,y);a.value=s.headers,t.value=s.columns;const u=s.headers.flat(1);for(const v of u)v.key&&(v.sortable&&(v.sort&&(r.value[v.key]=v.sort),v.sortRaw&&(o.value[v.key]=v.sortRaw)),v.filter&&(i.value[v.key]=v.filter))});const d={headers:a,columns:t,sortFunctions:r,sortRawFunctions:o,filterFunctions:i};return xe(Wt,d),d}function et(){const e=Te(Wt);if(!e)throw new Error("Missing headers!");return e}const gn={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:l,value:a}=e;return new Set(a?[(t=l[0])==null?void 0:t.value]:[])},selectAll:e=>{let{selected:l}=e;return l}},Xt={showSelectAll:!0,allSelected:e=>{let{currentPage:l}=e;return l},select:e=>{let{items:l,value:a,selected:t}=e;for(const r of l)a?t.add(r.value):t.delete(r.value);return t},selectAll:e=>{let{value:l,currentPage:a,selected:t}=e;return Xt.select({items:a,value:l,selected:t})}},Zt={showSelectAll:!0,allSelected:e=>{let{allItems:l}=e;return l},select:e=>{let{items:l,value:a,selected:t}=e;for(const r of l)a?t.add(r.value):t.delete(r.value);return t},selectAll:e=>{let{value:l,allItems:a,selected:t}=e;return Zt.select({items:a,value:l,selected:t})}},yn=Q({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Nt}},"DataTable-select"),ea=Symbol.for("vuetify:data-table-selection");function ta(e,l){let{allItems:a,currentPage:t}=l;const r=ve(e,"modelValue",e.modelValue,f=>new Set(Oe(f).map(v=>{var D;return((D=a.value.find(A=>e.valueComparator(v,A.value)))==null?void 0:D.value)??v})),f=>[...f.values()]),o=h(()=>a.value.filter(f=>f.selectable)),i=h(()=>t.value.filter(f=>f.selectable)),d=h(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return gn;case"all":return Zt;case"page":default:return Xt}});function c(f){return Oe(f).every(v=>r.value.has(v.value))}function m(f){return Oe(f).some(v=>r.value.has(v.value))}function _(f,v){const D=d.value.select({items:f,value:v,selected:new Set(r.value)});r.value=D}function x(f){_([f],!c([f]))}function y(f){const v=d.value.selectAll({value:f,allItems:o.value,currentPage:i.value,selected:new Set(r.value)});r.value=v}const s=h(()=>r.value.size>0),u=h(()=>{const f=d.value.allSelected({allItems:o.value,currentPage:i.value});return!!f.length&&c(f)}),p=h(()=>d.value.showSelectAll),g={toggleSelect:x,select:_,selectAll:y,isSelected:c,isSomeSelected:m,someSelected:s,allSelected:u,showSelectAll:p};return xe(ea,g),g}function tt(){const e=Te(ea);if(!e)throw new Error("Missing selection!");return e}const pn=Q({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),aa=Symbol.for("vuetify:data-table-sort");function la(e){const l=ve(e,"sortBy"),a=W(e,"mustSort"),t=W(e,"multiSort");return{sortBy:l,mustSort:a,multiSort:t}}function na(e){const{sortBy:l,mustSort:a,multiSort:t,page:r}=e,o=c=>{if(c.key==null)return;let m=l.value.map(x=>({...x}))??[];const _=m.find(x=>x.key===c.key);_?_.order==="desc"?a.value?_.order="asc":m=m.filter(x=>x.key!==c.key):_.order="desc":t.value?m=[...m,{key:c.key,order:"asc"}]:m=[{key:c.key,order:"asc"}],l.value=m,r&&(r.value=1)};function i(c){return!!l.value.find(m=>m.key===c.key)}const d={sortBy:l,toggleSort:o,isSorted:i};return xe(aa,d),d}function oa(){const e=Te(aa);if(!e)throw new Error("Missing sort!");return e}function bn(e,l,a,t){const r=Me();return{sortedItems:h(()=>{var i,d;return!a.value.length||e.disableSort?l.value:hn(l.value,a.value,r.current.value,{transform:t==null?void 0:t.transform,sortFunctions:{...e.customKeySort,...(i=t==null?void 0:t.sortFunctions)==null?void 0:i.value},sortRawFunctions:(d=t==null?void 0:t.sortRawFunctions)==null?void 0:d.value})})}}function hn(e,l,a,t){const r=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(i=>[i,t!=null&&t.transform?t.transform(i):i]).sort((i,d)=>{var c,m;for(let _=0;_<l.length;_++){let x=!1;const y=l[_].key,s=l[_].order??"asc";if(s===!1)continue;let u=i[1][y],p=d[1][y],g=i[0].raw,f=d[0].raw;if(s==="desc"&&([u,p]=[p,u],[g,f]=[f,g]),(c=t==null?void 0:t.sortRawFunctions)!=null&&c[y]){const v=t.sortRawFunctions[y](g,f);if(v==null)continue;if(x=!0,v)return v}if((m=t==null?void 0:t.sortFunctions)!=null&&m[y]){const v=t.sortFunctions[y](u,p);if(v==null)continue;if(x=!0,v)return v}if(!x){if(u instanceof Date&&p instanceof Date)return u.getTime()-p.getTime();if([u,p]=[u,p].map(v=>v!=null?v.toString().toLocaleLowerCase():v),u!==p)return Ue(u)&&Ue(p)?0:Ue(u)?-1:Ue(p)?1:!isNaN(u)&&!isNaN(p)?Number(u)-Number(p):r.compare(u,p)}}return 0}).map(i=>{let[d]=i;return d})}const ra=Q({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:Se,default:"$sortAsc"},sortDescIcon:{type:Se,default:"$sortDesc"},headerProps:{type:Object},...dt(),...el()},"VDataTableHeaders"),Je=ge()({name:"VDataTableHeaders",props:ra(),setup(e,l){let{slots:a}=l;const{t}=Me(),{toggleSort:r,sortBy:o,isSorted:i}=oa(),{someSelected:d,allSelected:c,selectAll:m,showSelectAll:_}=tt(),{columns:x,headers:y}=et(),{loaderClasses:s}=$t(e);function u(S,b){if(!(!e.sticky&&!S.fixed))return{position:"sticky",left:S.fixed?he(S.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${b})`:void 0}}function p(S){const b=o.value.find(w=>w.key===S.key);return b?b.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:g,backgroundColorStyles:f}=tl(e,"color"),{displayClasses:v,mobile:D}=Ze(e),A=h(()=>({headers:y.value,columns:x.value,toggleSort:r,isSorted:i,sortBy:o.value,someSelected:d.value,allSelected:c.value,selectAll:m,getSortIcon:p})),k=h(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},v.value,s.value]),L=S=>{let{column:b,x:w,y:V}=S;const F=b.key==="data-table-select"||b.key==="data-table-expand",R=j(e.headerProps??{},b.headerProps??{});return n(We,j({tag:"th",align:b.align,class:[{"v-data-table__th--sortable":b.sortable&&!e.disableSort,"v-data-table__th--sorted":i(b),"v-data-table__th--fixed":b.fixed},...k.value],style:{width:he(b.width),minWidth:he(b.minWidth),maxWidth:he(b.maxWidth),...u(b,V)},colspan:b.colspan,rowspan:b.rowspan,onClick:b.sortable?()=>r(b):void 0,fixed:b.fixed,nowrap:b.nowrap,lastFixed:b.lastFixed,noPadding:F},R),{default:()=>{var U;const P=`header.${b.key}`,T={column:b,selectAll:m,isSorted:i,toggleSort:r,sortBy:o.value,someSelected:d.value,allSelected:c.value,getSortIcon:p};return a[P]?a[P](T):b.key==="data-table-select"?((U=a["header.data-table-select"])==null?void 0:U.call(a,T))??(_.value&&n(Ae,{modelValue:c.value,indeterminate:d.value&&!c.value,"onUpdate:modelValue":m},null)):n("div",{class:"v-data-table-header__content"},[n("span",null,[b.title]),b.sortable&&!e.disableSort&&n(Ie,{key:"icon",class:"v-data-table-header__sort-icon",icon:p(b)},null),e.multiSort&&i(b)&&n("div",{key:"badge",class:["v-data-table-header__sort-badge",...g.value],style:f.value},[o.value.findIndex(H=>H.key===b.key)+1])])}})},z=()=>{const S=j(e.headerProps??{}??{}),b=h(()=>x.value.filter(V=>(V==null?void 0:V.sortable)&&!e.disableSort)),w=h(()=>{if(x.value.find(F=>F.key==="data-table-select")!=null)return c.value?"$checkboxOn":d.value?"$checkboxIndeterminate":"$checkboxOff"});return n(We,j({tag:"th",class:[...k.value],colspan:y.value.length+1},S),{default:()=>[n("div",{class:"v-data-table-header__content"},[n(ie,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:b.value,label:t("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>o.value=[],appendIcon:w.value,"onClick:append":()=>m(!c.value)},{...a,chip:V=>{var F;return n(Vl,{onClick:(F=V.item.raw)!=null&&F.sortable?()=>r(V.item.raw):void 0,onMousedown:R=>{R.preventDefault(),R.stopPropagation()}},{default:()=>[V.item.title,n(Ie,{class:["v-data-table__td-sort-icon",i(V.item.raw)&&"v-data-table__td-sort-icon-active"],icon:p(V.item.raw),size:"small"},null)]})}})])]})};pe(()=>D.value?n("tr",null,[n(z,null,null)]):n(ne,null,[a.headers?a.headers(A.value):y.value.map((S,b)=>n("tr",null,[S.map((w,V)=>n(L,{column:w,x:V,y:b},null))])),e.loading&&n("tr",{class:"v-data-table-progress"},[n("th",{colspan:x.value.length},[n(Et,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),_n=Q({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),sa=Symbol.for("vuetify:data-table-group");function ua(e){return{groupBy:ve(e,"groupBy")}}function ia(e){const{groupBy:l,sortBy:a}=e,t=ee(new Set),r=h(()=>l.value.map(m=>({...m,order:m.order??!1})).concat(a.value));function o(m){return t.value.has(m.id)}function i(m){const _=new Set(t.value);o(m)?_.delete(m.id):_.add(m.id),t.value=_}function d(m){function _(x){const y=[];for(const s of x.items)"type"in s&&s.type==="group"?y.push(..._(s)):y.push(s);return y}return _({type:"group",items:m,id:"dummy",key:"dummy",value:"dummy",depth:0})}const c={sortByWithGroups:r,toggleGroup:i,opened:t,groupBy:l,extractRows:d,isGroupOpen:o};return xe(sa,c),c}function da(){const e=Te(sa);if(!e)throw new Error("Missing group!");return e}function wn(e,l){if(!e.length)return[];const a=new Map;for(const t of e){const r=At(t.raw,l);a.has(r)||a.set(r,[]),a.get(r).push(t)}return a}function ca(e,l){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!l.length)return[];const r=wn(e,l[0]),o=[],i=l.slice(1);return r.forEach((d,c)=>{const m=l[0],_=`${t}_${m}_${c}`;o.push({depth:a,id:_,key:m,value:c,items:i.length?ca(d,i,a+1,_):d,type:"group"})}),o}function fa(e,l){const a=[];for(const t of e)"type"in t&&t.type==="group"?(t.value!=null&&a.push(t),(l.has(t.id)||t.value==null)&&a.push(...fa(t.items,l))):a.push(t);return a}function ma(e,l,a){return{flatItems:h(()=>{if(!l.value.length)return e.value;const r=ca(e.value,l.value.map(o=>o.key));return fa(r,a.value)})}}const kn=Q({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),xn=ge()({name:"VDataTableGroupHeaderRow",props:kn(),setup(e,l){let{slots:a}=l;const{isGroupOpen:t,toggleGroup:r,extractRows:o}=da(),{isSelected:i,isSomeSelected:d,select:c}=tt(),{columns:m}=et(),_=h(()=>o([e.item]));return()=>n("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[m.value.map(x=>{var y,s;if(x.key==="data-table-group"){const u=t(e.item)?"$expand":"$next",p=()=>r(e.item);return((y=a["data-table-group"])==null?void 0:y.call(a,{item:e.item,count:_.value.length,props:{icon:u,onClick:p}}))??n(We,{class:"v-data-table-group-header-row__column"},{default:()=>[n(le,{size:"small",variant:"text",icon:u,onClick:p},null),n("span",null,[e.item.value]),n("span",null,[fe("("),_.value.length,fe(")")])]})}if(x.key==="data-table-select"){const u=i(_.value),p=d(_.value)&&!u,g=f=>c(_.value,f);return((s=a["data-table-select"])==null?void 0:s.call(a,{props:{modelValue:u,indeterminate:p,"onUpdate:modelValue":g}}))??n("td",null,[n(Ae,{modelValue:u,indeterminate:p,"onUpdate:modelValue":g},null)])}return n("td",null,null)})])}}),Sn=Q({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),va=Symbol.for("vuetify:datatable:expanded");function ga(e){const l=W(e,"expandOnClick"),a=ve(e,"expanded",e.expanded,d=>new Set(d),d=>[...d.values()]);function t(d,c){const m=new Set(a.value);c?m.add(d.value):m.delete(d.value),a.value=m}function r(d){return a.value.has(d.value)}function o(d){t(d,!r(d))}const i={expand:t,expanded:a,expandOnClick:l,isExpanded:r,toggleExpand:o};return xe(va,i),i}function ya(){const e=Te(va);if(!e)throw new Error("foo");return e}const Vn=Q({index:Number,item:Object,cellProps:[Object,Function],onClick:at(),onContextmenu:at(),onDblclick:at(),...dt()},"VDataTableRow"),Pn=ge()({name:"VDataTableRow",props:Vn(),setup(e,l){let{slots:a}=l;const{displayClasses:t,mobile:r}=Ze(e,"v-data-table__tr"),{isSelected:o,toggleSelect:i,someSelected:d,allSelected:c,selectAll:m}=tt(),{isExpanded:_,toggleExpand:x}=ya(),{toggleSort:y,sortBy:s,isSorted:u}=oa(),{columns:p}=et();pe(()=>n("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},t.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&p.value.map((g,f)=>{const v=e.item,D=`item.${g.key}`,A=`header.${g.key}`,k={index:e.index,item:v.raw,internalItem:v,value:At(v.columns,g.key),column:g,isSelected:o,toggleSelect:i,isExpanded:_,toggleExpand:x},L={column:g,selectAll:m,isSorted:u,toggleSort:y,sortBy:s.value,someSelected:d.value,allSelected:c.value,getSortIcon:()=>""},z=typeof e.cellProps=="function"?e.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value,column:g}):e.cellProps,S=typeof g.cellProps=="function"?g.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value}):g.cellProps;return n(We,j({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,lastFixed:g.lastFixed,maxWidth:r.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:r.value?void 0:g.width},z,S),{default:()=>{var w,V,F,R,P;if(a[D]&&!r.value)return(w=a[D])==null?void 0:w.call(a,k);if(g.key==="data-table-select")return((V=a["item.data-table-select"])==null?void 0:V.call(a,k))??n(Ae,{disabled:!v.selectable,modelValue:o([v]),onClick:re(()=>i(v),["stop"])},null);if(g.key==="data-table-expand")return((F=a["item.data-table-expand"])==null?void 0:F.call(a,k))??n(le,{icon:_(v)?"$collapse":"$expand",size:"small",variant:"text",onClick:re(()=>x(v),["stop"])},null);const b=Z(k.value);return r.value?n(ne,null,[n("div",{class:"v-data-table__td-title"},[((R=a[A])==null?void 0:R.call(a,L))??g.title]),n("div",{class:"v-data-table__td-value"},[((P=a[D])==null?void 0:P.call(a,k))??b])]):b}})})]))}}),pa=Q({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...dt()},"VDataTableRows"),qe=ge()({name:"VDataTableRows",inheritAttrs:!1,props:pa(),setup(e,l){let{attrs:a,slots:t}=l;const{columns:r}=et(),{expandOnClick:o,toggleExpand:i,isExpanded:d}=ya(),{isSelected:c,toggleSelect:m}=tt(),{toggleGroup:_,isGroupOpen:x}=da(),{t:y}=Me(),{mobile:s}=Ze(e);return pe(()=>{var u,p;return e.loading&&(!e.items.length||t.loading)?n("tr",{class:"v-data-table-rows-loading",key:"loading"},[n("td",{colspan:r.value.length},[((u=t.loading)==null?void 0:u.call(t))??y(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?n("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[n("td",{colspan:r.value.length},[((p=t["no-data"])==null?void 0:p.call(t))??y(e.noDataText)])]):n(ne,null,[e.items.map((g,f)=>{var A;if(g.type==="group"){const k={index:f,item:g,columns:r.value,isExpanded:d,toggleExpand:i,isSelected:c,toggleSelect:m,toggleGroup:_,isGroupOpen:x};return t["group-header"]?t["group-header"](k):n(xn,j({key:`group-header_${g.id}`,item:g},Pt(a,":group-header",()=>k)),t)}const v={index:f,item:g.raw,internalItem:g,columns:r.value,isExpanded:d,toggleExpand:i,isSelected:c,toggleSelect:m},D={...v,props:j({key:`item_${g.key??g.index}`,onClick:o.value?()=>{i(g)}:void 0,index:f,item:g,cellProps:e.cellProps,mobile:s.value},Pt(a,":row",()=>v),typeof e.rowProps=="function"?e.rowProps({item:v.item,index:v.index,internalItem:v.internalItem}):e.rowProps)};return n(ne,{key:D.props.key},[t.item?t.item(D):n(Pn,D.props,t),d(g)&&((A=t["expanded-row"])==null?void 0:A.call(t,v))])})])}),{}}}),In=Q({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Cn(e,l,a,t){const r=e.returnObject?l:Be(l,e.itemValue),o=Be(l,e.itemSelectable,!0),i=t.reduce((d,c)=>(c.key!=null&&(d[c.key]=Be(l,c.value)),d),{});return{type:"item",key:e.returnObject?Be(l,e.itemValue):r,index:a,value:r,selectable:o,columns:i,raw:l}}function Dn(e,l,a){return l.map((t,r)=>Cn(e,t,r,a))}function ba(e,l){return{items:h(()=>Dn(e,e.items,l.value))}}function ha(e){let{page:l,itemsPerPage:a,sortBy:t,groupBy:r,search:o}=e;const i=Ot("VDataTable"),d=h(()=>({page:l.value,itemsPerPage:a.value,sortBy:t.value,groupBy:r.value,search:o.value}));let c=null;oe(d,()=>{Nt(c,d.value)||(c&&c.search!==d.value.search&&(l.value=1),i.emit("update:options",d.value),c=d.value)},{deep:!0,immediate:!0})}const Tn=(e,l,a)=>e==null||l==null?-1:e.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),$n=Q({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function En(e,l,a){var d;const t=[],r=(a==null?void 0:a.default)??Tn,o=a!=null&&a.filterKeys?Oe(a.filterKeys):!1,i=Object.keys((a==null?void 0:a.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return t;e:for(let c=0;c<e.length;c++){const[m,_=m]=Oe(e[c]),x={},y={};let s=-1;if((l||i>0)&&!(a!=null&&a.noFilter)){if(typeof m=="object"){const g=o||Object.keys(_);for(const f of g){const v=Be(_,f),D=(d=a==null?void 0:a.customKeyFilter)==null?void 0:d[f];if(s=D?D(v,l,m):r(v,l,m),s!==-1&&s!==!1)D?x[f]=s:y[f]=s;else if((a==null?void 0:a.filterMode)==="every")continue e}}else s=r(m,l,m),s!==-1&&s!==!1&&(y.title=s);const u=Object.keys(y).length,p=Object.keys(x).length;if(!u&&!p||(a==null?void 0:a.filterMode)==="union"&&p!==i&&!u||(a==null?void 0:a.filterMode)==="intersection"&&(p!==i||!u))continue}t.push({index:c,matches:{...y,...x}})}return t}function Fn(e,l,a,t){const r=ee([]),o=ee(new Map),i=h(()=>t!=null&&t.transform?M(l).map(c=>[c,t.transform(c)]):M(l));Xe(()=>{const c=typeof a=="function"?a():M(a),m=typeof c!="string"&&typeof c!="number"?"":String(c),_=En(i.value,m,{customKeyFilter:{...e.customKeyFilter,...M(t==null?void 0:t.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),x=M(l),y=[],s=new Map;_.forEach(u=>{let{index:p,matches:g}=u;const f=x[p];y.push(f),s.set(f.value,g)}),r.value=y,o.value=s});function d(c){return o.value.get(c.value)}return{filteredItems:r,filteredMatches:o,getMatches:d}}const _a=Q({...pa(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Sn(),..._n(),...un(),...In(),...yn(),...pn(),...ra(),...al()},"DataTable"),Bn=Q({...Gt(),..._a(),...$n(),...vt()},"VDataTable");ge()({name:"VDataTable",props:Bn(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const{groupBy:r}=ua(e),{sortBy:o,multiSort:i,mustSort:d}=la(e),{page:c,itemsPerPage:m}=Ht(e),{columns:_,headers:x,sortFunctions:y,sortRawFunctions:s,filterFunctions:u}=Qt(e,{groupBy:r,showSelect:W(e,"showSelect"),showExpand:W(e,"showExpand")}),{items:p}=ba(e,_),g=W(e,"search"),{filteredItems:f}=Fn(e,p,g,{transform:ae=>ae.columns,customKeyFilter:u}),{toggleSort:v}=na({sortBy:o,multiSort:i,mustSort:d,page:c}),{sortByWithGroups:D,opened:A,extractRows:k,isGroupOpen:L,toggleGroup:z}=ia({groupBy:r,sortBy:o}),{sortedItems:S}=bn(e,f,D,{transform:ae=>ae.columns,sortFunctions:y,sortRawFunctions:s}),{flatItems:b}=ma(S,r,A),w=h(()=>b.value.length),{startIndex:V,stopIndex:F,pageCount:R,setItemsPerPage:P}=Kt({page:c,itemsPerPage:m,itemsLength:w}),{paginatedItems:T}=sn({items:b,startIndex:V,stopIndex:F,itemsPerPage:m}),U=h(()=>k(T.value)),{isSelected:H,select:K,selectAll:$,toggleSelect:E,someSelected:C,allSelected:O}=ta(e,{allItems:p,currentPage:U}),{isExpanded:B,toggleExpand:N}=ga(e);ha({page:c,itemsPerPage:m,sortBy:o,groupBy:r,search:g}),He({VDataTableRows:{hideNoData:W(e,"hideNoData"),noDataText:W(e,"noDataText"),loading:W(e,"loading"),loadingText:W(e,"loadingText")}});const X=h(()=>({page:c.value,itemsPerPage:m.value,sortBy:o.value,pageCount:R.value,toggleSort:v,setItemsPerPage:P,someSelected:C.value,allSelected:O.value,isSelected:H,select:K,selectAll:$,toggleSelect:E,isExpanded:B,toggleExpand:N,isGroupOpen:L,toggleGroup:z,items:U.value.map(ae=>ae.raw),internalItems:U.value,groupedItems:T.value,columns:_.value,headers:x.value}));return pe(()=>{const ae=Ke.filterProps(e),$e=Je.filterProps(e),wa=qe.filterProps(e),ka=Ne.filterProps(e);return n(Ne,j({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ka),{top:()=>{var Ee;return(Ee=t.top)==null?void 0:Ee.call(t,X.value)},default:()=>{var Ee,yt,pt,bt,ht,_t;return t.default?t.default(X.value):n(ne,null,[(Ee=t.colgroup)==null?void 0:Ee.call(t,X.value),!e.hideDefaultHeader&&n("thead",{key:"thead"},[n(Je,$e,t)]),(yt=t.thead)==null?void 0:yt.call(t,X.value),!e.hideDefaultBody&&n("tbody",null,[(pt=t["body.prepend"])==null?void 0:pt.call(t,X.value),t.body?t.body(X.value):n(qe,j(a,wa,{items:T.value}),t),(bt=t["body.append"])==null?void 0:bt.call(t,X.value)]),(ht=t.tbody)==null?void 0:ht.call(t,X.value),(_t=t.tfoot)==null?void 0:_t.call(t,X.value)])},bottom:()=>t.bottom?t.bottom(X.value):!e.hideDefaultFooter&&n(ne,null,[n(Lt,null,null),n(Ke,ae,{prepend:t["footer.prepend"]})])})}),{}}});const Rn=Q({itemsLength:{type:[Number,String],required:!0},...Gt(),..._a(),...vt()},"VDataTableServer"),On=ge()({name:"VDataTableServer",props:Rn(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const{groupBy:r}=ua(e),{sortBy:o,multiSort:i,mustSort:d}=la(e),{page:c,itemsPerPage:m}=Ht(e),_=h(()=>parseInt(e.itemsLength,10)),{columns:x,headers:y}=Qt(e,{groupBy:r,showSelect:W(e,"showSelect"),showExpand:W(e,"showExpand")}),{items:s}=ba(e,x),{toggleSort:u}=na({sortBy:o,multiSort:i,mustSort:d,page:c}),{opened:p,isGroupOpen:g,toggleGroup:f,extractRows:v}=ia({groupBy:r,sortBy:o}),{pageCount:D,setItemsPerPage:A}=Kt({page:c,itemsPerPage:m,itemsLength:_}),{flatItems:k}=ma(s,r,p),{isSelected:L,select:z,selectAll:S,toggleSelect:b,someSelected:w,allSelected:V}=ta(e,{allItems:s,currentPage:s}),{isExpanded:F,toggleExpand:R}=ga(e),P=h(()=>v(s.value));ha({page:c,itemsPerPage:m,sortBy:o,groupBy:r,search:W(e,"search")}),xe("v-data-table",{toggleSort:u,sortBy:o}),He({VDataTableRows:{hideNoData:W(e,"hideNoData"),noDataText:W(e,"noDataText"),loading:W(e,"loading"),loadingText:W(e,"loadingText")}});const T=h(()=>({page:c.value,itemsPerPage:m.value,sortBy:o.value,pageCount:D.value,toggleSort:u,setItemsPerPage:A,someSelected:w.value,allSelected:V.value,isSelected:L,select:z,selectAll:S,toggleSelect:b,isExpanded:F,toggleExpand:R,isGroupOpen:g,toggleGroup:f,items:P.value.map(U=>U.raw),internalItems:P.value,groupedItems:k.value,columns:x.value,headers:y.value}));pe(()=>{const U=Ke.filterProps(e),H=Je.filterProps(e),K=qe.filterProps(e),$=Ne.filterProps(e);return n(Ne,j({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},$),{top:()=>{var E;return(E=t.top)==null?void 0:E.call(t,T.value)},default:()=>{var E,C,O,B,N,X;return t.default?t.default(T.value):n(ne,null,[(E=t.colgroup)==null?void 0:E.call(t,T.value),!e.hideDefaultHeader&&n("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[n(Je,j(H,{sticky:e.fixedHeader}),t)]),(C=t.thead)==null?void 0:C.call(t,T.value),!e.hideDefaultBody&&n("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(O=t["body.prepend"])==null?void 0:O.call(t,T.value),t.body?t.body(T.value):n(qe,j(a,K,{items:k.value}),t),(B=t["body.append"])==null?void 0:B.call(t,T.value)]),(N=t.tbody)==null?void 0:N.call(t,T.value),(X=t.tfoot)==null?void 0:X.call(t,T.value)])},bottom:()=>t.bottom?t.bottom(T.value):!e.hideDefaultFooter&&n(ne,null,[n(Lt,null,null),n(Ke,U,{prepend:t["footer.prepend"]})])})})}}),Nn=["onClick"],An={key:1},Ln={__name:"Table",props:{model:{type:Object,default:null},loading:{type:Boolean,default:!1},can_remove:{type:Boolean,default:!1},can_edit:{type:Boolean,default:!0},can_review:{type:Boolean,default:!1},disable_review:{type:Boolean,default:!1},court_types:{type:Array,default:()=>[]},origin_types:{type:Array,default:()=>[]}},emits:["select","download","check_changed","options_changed"],setup(e,{emit:l}){const a=Le(),t=e,o=De(ce({checked_ids:[],checkAll:!1})),i=it.JUDGEBOOKFILE,d=l,c=h(()=>a.state.files_judgebooks.labels),m=h(()=>a.state.files_judgebooks.params);oe(m,k=>{o.checkAll=!1,o.checked_ids=[]}),oe(()=>o.checked_ids,(k,L)=>{d("check_changed",k)},{deep:!0});const _=[{title:"",align:"center",width:"3%",sortable:!1,key:"action"},{title:"審核",align:"center",width:"5%",sortable:!1,key:"reviewed"},{title:`${c.value.typeId}`,align:"",width:"5%",sortable:!1,key:"typeId"},{title:c.value.courtType,align:"start",width:"5%",sortable:!1,key:"courtType"},{title:c.value.dpt,align:"start",width:"5%",sortable:!1,key:"department"},{title:c.value.fileNumber,align:"start",width:"12%",sortable:!1,key:"fileNumber"},{title:`${c.value.year}`,align:"start",width:"5%",sortable:!1,key:"year"},{title:`${c.value.category}`,align:"start",width:"5%",sortable:!1,key:"category"},{title:`${c.value.num}`,align:"start",width:"5%",sortable:!1,key:"num"},{title:c.value.judgeDate,align:"start",width:"5%",sortable:!1,key:"judgeDate"},{title:"檔案",align:"start",width:"10%",sortable:!1,key:"fileName"},{title:"上傳日期",align:"start",width:"8%",sortable:!1,key:"createdAtText"}],x=h(()=>{if(t.can_review&&!t.disable_review){let k=_.slice();return k.splice(0,0,{title:"",align:"start",width:"3%",sortable:!1,key:"check"}),k}else return _}),y=h(()=>ct(t.model)?[]:t.model.viewList),s=h(()=>[Y.CREATE,Y.UPDATE,Y.REVIEW].map(L=>L.name));function u(k){d("select",k)}function p(k){d("download",k)}function g(k){d("options_changed",{page:k})}function f(k){d("options_changed",{size:k})}function v(k){return t.court_types.find(z=>z.value===k).title}function D(k){Rt({type:i.name,id:k,action:Y.REVIEW.name,title:`${Y.REVIEW.title}紀錄`,width:Re.L})}function A(k){k?o.checked_ids=y.value.map(L=>L.id):o.checked_ids=[]}return(k,L)=>{const z=nl,S=on,b=nn;return q(),te(On,{"items-per-page":e.model.pageSize,"onUpdate:itemsPerPage":L[2]||(L[2]=w=>e.model.pageSize=w),headers:x.value,"items-length":e.model.totalItems,loading:t.loading,items:y.value},ll({"item.action":I(({item:w})=>[w.canEdit?(q(),te(z,{key:0,size:"x-small",onEdit:V=>u(w.id)},null,8,["onEdit"])):me("",!0)]),"item.reviewed":I(({item:w})=>[w.reviewed?(q(),te(ke,{key:0,text:"查看審核紀錄"},{activator:I(({props:V})=>[n(Ie,j(V,{color:"success",icon:"mdi-check-circle",onClick:re(F=>D(w.id),["prevent"])}),null,16,["onClick"])]),_:2},1024)):me("",!0)]),"item.typeId":I(({item:w})=>[fe(Z(w.type.title),1)]),"item.courtType":I(({item:w})=>[fe(Z(v(w.courtType)),1)]),"item.department":I(({item:w})=>[fe(Z(w.department?w.department.title:""),1)]),"item.judgeDate":I(({item:w})=>[fe(Z(M(Dt)(w.judgeDate,!0)),1)]),"item.fileName":I(({item:w})=>[w.canEdit?(q(),te(ke,{key:0,text:"下載檔案"},{activator:I(({props:V})=>[J("a",j({href:"#"},V,{onClick:re(F=>p(w.id),["prevent"])}),Z(w.fileName),17,Nn)]),_:2},1024)):(q(),we("span",An,Z(w.fileName),1))]),"item.createdAtText":I(({item:w})=>[n(S,{type:M(i),action:s.value.join(),tooltip:"查看編修紀錄",title:"編修紀錄",id:w.id.toString(),text:w.createdAtText},null,8,["type","action","id","text"])]),bottom:I(({item:w})=>[n(b,{model:e.model,onPage_changed:g,onSize_changed:f},null,8,["model"])]),_:2},[e.can_review?{name:"header.check",fn:I(()=>[_e(n(It,{"hide-details":"",modelValue:o.checkAll,"onUpdate:modelValue":[L[0]||(L[0]=w=>o.checkAll=w),A]},null,8,["modelValue"]),[[Pe,y.value.length]])]),key:"0"}:void 0,e.can_review?{name:"item.check",fn:I(({item:w})=>[n(It,{"hide-details":"",modelValue:o.checked_ids,"onUpdate:modelValue":L[1]||(L[1]=V=>o.checked_ids=V),value:w.id},null,8,["modelValue","value"])]),key:"1"}:void 0]),1032,["items-per-page","headers","items-length","loading","items"])}}},Mn={__name:"Head",props:{can_review:{type:Boolean,default:!1},disable_review:{type:Boolean,default:!1}},emits:["submit","upload","review"],setup(e,{expose:l,emit:a}){const t=Le(),r=Mt(),o=jt(),i=e,d=a;l({init:w,setParams:R,getParams:P,setPageOption:F});const c={params:{reviewed:-1,typeId:0,departmentId:null,fileNumber:"",courtType:"",year:"",category:"",num:"",createdby:"",page:-1,pageSize:50},options:{review:[],department:[]}},m=[{value:"",title:"全部人"},{value:"me",title:"我自己"}];Ye(()=>{g.value&&R(g.value);let C=Rl.slice(0);C.splice(0,0,{value:-1,title:"全部"}),u.options.review=C});function _(C){return C?se.checkFileNumber(C):!0}function x(C){return C?se.checkYear(C):!0}function y(C){return!0}function s(C){return C?se.isValidNum(C):!0}const u=De(ce(c)),p=h(()=>t.state.files_judgebooks.pagedList!=null),g=h(()=>t.state.files_judgebooks.params),f=h(()=>t.state.files_judgebooks.isFilesManager);h(()=>t.state.files_judgebooks.isChiefClerk),h(()=>t.state.files_judgebooks.isAdmin);const v=h(()=>t.state.files_judgebooks.departments),D=h(()=>{let C=t.state.files_judgebooks.courtTypes.slice(0);return t.state.files_judgebooks.ad_dpts.length||C.splice(0,0,{value:"",title:"全部"}),C}),A=h(()=>{let O=t.state.files_judgebooks.types.map(B=>({value:B.id,title:B.title}));return O.splice(0,0,{value:0,title:"全部"}),O}),k=h(()=>t.state.files_judgebooks.labels),L=h(()=>({fileNumber:{isValid:ue.withMessage(`${k.value.fileNumber}不正確`,_)},year:{isValid:ue.withMessage(`${k.value.year}不正確`,x)},category:{isValid:ue.withMessage(`${k.value.category}不正確`,y)},num:{isValid:ue.withMessage(`${k.value.num}不正確`,s)}})),z=h(()=>r.query?ol(u.params,r.query,!0):!1),S=Ut(L,u.params);oe(r,w),oe(g,C=>{R(C)});function b(){u.params.typeId||(u.params.typeId=A.value[0].value),u.params.courtType||(u.params.courtType=D.value[0].value),K(u.params.courtType)}function w(){if(b(),ct(r.query)){o.push({path:r.path,query:{...u.params}});return}if(rl(u.params,r.query),b(),!z.value){o.push({path:r.path,query:{...u.params}});return}const C=V();if(C.any()){sl("BAD_REQUEST ","錯誤的查詢參數",C.getAll());return}d("submit",u.params)}function V(){let C=new Ct;const O=u.params.year;x(O)||C.set("year",[`錯誤的${k.year}`]);const B=u.params.num;return s(B)||C.set("num",[`錯誤的${k.num}`]),C}function F(C){C.hasOwnProperty("page")&&(u.params.page=C.page),C.hasOwnProperty("size")&&(u.params.pageSize=C.size),T()}function R(C){Qe(C,u.params)}function P(){return u.params}function T(){z.value?d("submit",u.params):o.push({path:r.path,query:{...u.params}})}function U(){d("upload")}function H(C){K(C),$()}function K(C){const O="department";C=C?C.toLowerCase():"",C?u.options[O]=v.value[C].options.slice():u.options[O]=[],t.state.files_judgebooks.ad_dpts.length||u.options[O].findIndex(ae=>!ae.value)<0&&u.options[O].splice(0,0,{value:null,title:"全部"});const N=u.options[O],X=u.params.departmentId?ul(u.params.departmentId):null;N.length?N.findIndex($e=>$e.value===X)<0&&(u.params.departmentId=N[0].value):u.params.departmentId=null}function $(){T()}function E(){d("review")}return(C,O)=>_e((q(),we("form",{onSubmit:re(T,["prevent"]),onInput:O[9]||(O[9]=(...B)=>C.onInputChanged&&C.onInputChanged(...B))},[n(de,{dense:""},{default:I(()=>[n(G,{cols:"1"},{default:I(()=>[n(ie,{label:k.value.createdBy,density:"compact",items:m,modelValue:u.params.createdby,"onUpdate:modelValue":[O[0]||(O[0]=B=>u.params.createdby=B),$]},null,8,["label","modelValue"])]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ie,{label:k.value.reviewed,density:"compact",items:u.options.review,modelValue:u.params.reviewed,"onUpdate:modelValue":[O[1]||(O[1]=B=>u.params.reviewed=B),$]},null,8,["label","items","modelValue"])]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ie,{label:k.value.typeId,density:"compact",items:A.value,modelValue:u.params.typeId,"onUpdate:modelValue":[O[2]||(O[2]=B=>u.params.typeId=B),$]},null,8,["label","items","modelValue"])]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ie,{label:k.value.courtType,density:"compact",items:D.value,modelValue:u.params.courtType,"onUpdate:modelValue":[O[3]||(O[3]=B=>u.params.courtType=B),H]},null,8,["label","items","modelValue"])]),_:1}),_e(n(G,{cols:"1"},{default:I(()=>[n(ie,{label:k.value.dpt,density:"compact",items:u.options.department,modelValue:u.params.departmentId,"onUpdate:modelValue":[O[4]||(O[4]=B=>u.params.departmentId=B),$]},null,8,["label","items","modelValue"])]),_:1},512),[[Pe,u.params.courtType]]),i.can_review?_e((q(),te(G,{key:0,cols:"2"},{default:I(()=>[n(ye,{label:k.value.fileNumber,density:"compact",clearable:!0,modelValue:u.params.fileNumber,"onUpdate:modelValue":O[5]||(O[5]=B=>u.params.fileNumber=B),"error-messages":M(S).fileNumber.$errors.map(B=>B.$message),onInput:M(S).fileNumber.$touch,onBlur:M(S).fileNumber.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1},512)),[[Pe,f.value]]):me("",!0),n(G,{cols:"1"},{default:I(()=>[n(ye,{label:k.value.year,density:"compact",clearable:"",modelValue:u.params.year,"onUpdate:modelValue":O[6]||(O[6]=B=>u.params.year=B),"error-messages":M(S).year.$errors.map(B=>B.$message),onInput:M(S).year.$touch,onBlur:M(S).year.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ye,{label:k.value.category,density:"compact",clearable:"",modelValue:u.params.category,"onUpdate:modelValue":O[7]||(O[7]=B=>u.params.category=B),"error-messages":M(S).category.$errors.map(B=>B.$message),onInput:M(S).category.$touch,onBlur:M(S).category.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ye,{label:k.value.num,density:"compact",clearable:"",modelValue:u.params.num,"onUpdate:modelValue":O[8]||(O[8]=B=>u.params.num=B),"error-messages":M(S).num.$errors.map(B=>B.$message),onInput:M(S).num.$touch,onBlur:M(S).num.$touch},null,8,["label","modelValue","error-messages","onInput","onBlur"])]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ke,{text:"查詢"},{activator:I(({props:B})=>[n(le,j({class:"float-left"},B,{color:"success",type:"submit"}),{default:I(()=>[fe(" 查詢 ")]),_:2},1040)]),_:1})]),_:1}),n(G,{cols:"1"},{default:I(()=>[n(ke,{text:"上傳"},{activator:I(({props:B})=>[n(le,j({class:"float-right",disabled:u.params.reviewed===1,icon:"mdi-upload"},B,{size:"small",color:"info",onClick:re(U,["prevent"])}),null,16,["disabled"])]),_:1}),i.can_review?(q(),te(ke,{key:0,disabled:i.disable_review,text:"審核選取的項目"},{activator:I(({props:B})=>[n(le,j({class:"float-right mr-3"},B,{icon:"mdi-check",size:"small",color:"warning",disabled:e.disable_review,onClick:re(E,["prevent"])}),null,16,["disabled"])]),_:1},8,["disabled"])):me("",!0)]),_:1})]),_:1})],544)),[[Pe,p.value]])}},jn={style:{"padding-right":"10px"}},Qn={__name:"Index",setup(e){const l=Le();Mt();const a=jt(),t=it.JUDGEBOOKFILE,r={upload:{title:`${Y.UPLOAD.title}${t.title}`,type:null,courtType:null,active:!1},form:{id:0,title:"",active:!1,model:{},action:"",actions:[],width:Re.M},review:{ids:[]}},o=De(ce(r));h(()=>l.state.files_judgebooks.isFilesManager);const i=h(()=>l.state.files_judgebooks.params);h(()=>l.state.files_judgebooks.ad_dpts);const d=h(()=>l.state.files_judgebooks.types),c=h(()=>l.state.files_judgebooks.departments),m=h(()=>l.state.files_judgebooks.courtTypes),_=h(()=>l.state.files_judgebooks.originTypes),x=ee(null),y=h(()=>l.state.files_judgebooks.pagedList),s=h(()=>v(Y.REVIEW.name)),u=h(()=>i.value.reviewed!==0),p=h(()=>!s.value||u.value?!1:o.review.ids.length>0);Bt(()=>{d.value.length&&c.value.length?g():l.dispatch(il).then(()=>{Ve(g)}).catch(P=>be(P))});function g(){x.value.init()}function f(P){l.commit(Fe),l.dispatch(cl,P).catch(T=>be(T))}function v(P){const T=l.state.files_judgebooks.actions;return T.length?T.findIndex(U=>U.toLowerCase()===P.toLowerCase())>-1:!1}function D(P){x.value.setPageOption(P)}function A(P){o.form.id=P,l.commit(Fe),l.dispatch(pl,P).then(T=>{o.form.title=`${Y.EDIT.title}${t.title}`,o.form.model=ce(T.model),o.form.actions=T.actions,o.form.action=kt,o.form.width=Re.L,o.form.active=!0}).catch(T=>be(T))}function k(P){l.dispatch(bl,P).then(T=>{const U=T.fileView,H=T.ext,K=El(U.fileBytes),$=new Blob([K],{type:Fl(H)});Bl($,T.fileView.fileName)}).catch(T=>be(T))}function L(){const P=x.value.getParams();l.commit(fl,P),a.push({name:`upload-${ml.JUDGEBOOKFILES}`})}function z(){l.commit(Fe),l.dispatch(vl,o.review.ids).then(P=>{o.form.title=`${Y.REVIEW.title}${t.title}`,o.form.model=P,o.form.actions=[Y.REVIEW.name],o.form.action=lt,o.form.width=Re.XL,o.form.active=!0}).catch(P=>be(P))}function S(P){l.commit(Fe),l.dispatch(lt,P).then(()=>{f(x.value.getParams()),nt(),b()}).catch(T=>be(T))}function b(){o.form=ce(r.form)}function w({form:P,file:T}){Qe(P,o.form.model);const U=o.form.id,H=o.form.model;l.dispatch(o.form.action,{id:U,model:H,file:T}).then(()=>{f(x.value.getParams()),b(),nt()}).catch(K=>V(K))}function V(P){if(hl(P)){let T=xt(P);T?l.commit(St,Object.values(T)):be(P)}else be(P)}function F(P){o.review.ids=P}function R(){const P=o.form.model.id;l.dispatch(_l,P).then(()=>{f(x.value.getParams()),b(),nt("刪除成功")}).catch(T=>{let U=xt(T);U?l.commit(St,Object.values(U)):be(T)})}return(P,T)=>{const U=Mn,H=Ln,K=wl,$=Zl,E=zl;return q(),we("div",null,[n(U,{ref_key:"head",ref:x,can_review:s.value,disable_review:!p.value,onSubmit:f,onUpload:T[0]||(T[0]=C=>L()),onReview:z},null,8,["can_review","disable_review"]),n(de,{dense:""},{default:I(()=>[n(G,{cols:"12"},{default:I(()=>[M(ct)(y.value)?me("",!0):(q(),te(H,{key:0,model:y.value,court_types:m.value,origin_types:_.value,can_review:s.value,disable_review:u.value,onSelect:A,onDownload:k,onOptions_changed:D,onCheck_changed:F},null,8,["model","court_types","origin_types","can_review","disable_review"]))]),_:1})]),_:1}),n(dl,{persistent:"",modelValue:o.form.active,"onUpdate:modelValue":T[1]||(T[1]=C=>o.form.active=C),width:o.form.width+50},{default:I(()=>[o.form.active?(q(),te(yl,{key:0,"max-width":o.form.width},{default:I(()=>[n(K,{title:o.form.title,onCancel:b},null,8,["title"]),n(gl,null,{default:I(()=>[J("div",jn,[o.form.action===M(kt)?(q(),te($,{key:0,types:_.value,dpt_options:P.dptOptions,origin_types:_.value,court_types:m.value,model:o.form.model,actions:o.form.actions,onSubmit:w,onRemove:R},null,8,["types","dpt_options","origin_types","court_types","model","actions"])):me("",!0),o.form.action===M(lt)?(q(),te(E,{key:1,origin_types:_.value,court_types:m.value,list:o.form.model,onSubmit:S},null,8,["origin_types","court_types","list"])):me("",!0)])]),_:1})]),_:1},8,["max-width"])):me("",!0)]),_:1},8,["modelValue","width"])])}}};export{Qn as default};
